<!DOCTYPE html>
<html>
 <head>
   <title>Circles</title>
   <script type="text/javascript" src="http://mbostock.github.com/d3/d3.js?2.5.0"></script>
   <script type="text/javascript" src="http://mbostock.github.com/d3/d3.layout.js?2.5.0"></script>
   <link rel="stylesheet" type="text/css" href="motion.css">
   <style type="text/css">

   </style>
 </head>
 <body>

     <p>Click a Smiley<p>

   <script type="text/javascript">

    var drag = d3.behavior.drag()
        .on("drag", function(d,i) {
            d.x += d3.event.dx
            d.y += d3.event.dy
            d3.select(this).attr("transform", function(d,i){
                return "translate(" + [ d.x,d.y ] + ")"
            })
        });


    function face_factory(classname, data, x, y, r)
    { 
      
        var face = d3.select("#charts")
            .append("svg:g")
                .data([ {"x":x, "y":y} ])
                .attr("class", classname)
                .attr("transform", "translate(" + x + "," + y + ")")
                .call(drag);


        var head_color = d3.scale.linear()
            .domain([0, 1])
            .interpolate(d3.interpolateRgb)
            .range(["#ff0000", "#0000ff"]);

        var head = face.append("svg:circle")
                .attr("class", "head")
                .attr("fill", function(d){ return head_color(data.x); })
                .attr("fill-opacity", .8)
                .attr("stroke", "#000")
                .attr("stroke-width", 4)
                .attr("r", r);

        var words = ["Gun Laws", "Economy","Healthcare","Immigration","LGBTQ"]

        var text = face.append("svg:text")
            .text("Economy")
            .attr("y", ".5em")
            .attr("transform", "translate(" + [0, r/3] + ")")
            .attr("text-anchor", "middle")
            .attr("font-weight", 700)
            .attr("font-family", "Helvetica")
            .attr("fill", "#ff0")
            .attr("stroke", "none")
            .attr("pointer-events", "none") 

    }

    var w = 700;
    var h = 400;

    d3.select("body")
        .append("svg:svg")
            .attr("width", w)
            .attr("height", h)
            .attr("id", "charts")
            .append("svg:rect")
                .attr("width", "100%")
                .attr("height", "100%")
                .attr("stroke", "#000")
                .attr("stroke-width", 3)
                .attr("fill", "none")

    for(i = 0; i < 5; i++)
    {
        var r = 50;
        var data = { "x":Math.random(), "y":Math.random(), "z":Math.random(), "w":Math.random() };
        x = Math.random() * w
        y = Math.random() * h
        face_factory("face"+i, data, x, y, r);
    }


    //Brownian
    var svg = d3.select('svg')

var circles = svg.selectAll('circle')



function transition() {
    circles.transition()
        .duration(1000)
        .ease("linear")
        .attr('cx',  300 * (1 + Math.random()/2))
        .attr('cy',  100 * (1 + Math.random()/2))
        .each("end", transition);
};

transition();
   
   </script>
<!--     <h4>My circles</h4>

<svg width="720" height="120">
  <circle class="circle1" cx="40" cy="60" r="50" fill="red"></circle>
  <circle class="circle2" cx="80" cy="60" r="50" fill="steelblue"></circle>
  <circle class="circle3" cx="120" cy="60" r="50" fill="yellow"></circle>
</svg> -->


 </body>
</html>